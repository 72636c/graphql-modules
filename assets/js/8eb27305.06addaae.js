"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4324],{4137:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),l=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},s=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||a;return n?o.createElement(f,c(c({ref:t},s),{},{components:n})):o.createElement(f,c({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,c=new Array(a);c[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var l=2;l<a;l++)c[l]=n[l];return o.createElement.apply(null,c)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3389:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return s},default:function(){return d}});var o=n(7462),r=n(3366),a=(n(7294),n(4137)),c=["components"],i={id:"execution-context",title:"Execution Context"},p=void 0,l={unversionedId:"advanced/execution-context",id:"advanced/execution-context",isDocsHomePage:!1,title:"Execution Context",description:"Execution Context means the context of execution of GraphQL Operation. It's related to Dependency Injection, especially Singletons and represents the context object created by your GraphQL server.",source:"@site/docs/advanced/execution-context.md",sourceDirName:"advanced",slug:"/advanced/execution-context",permalink:"/docs/advanced/execution-context",editUrl:"https://github.com/Urigo/graphql-modules/edit/master/website/docs/advanced/execution-context.md",version:"current",frontMatter:{id:"execution-context",title:"Execution Context"},sidebar:"docs",previous:{title:"Middlewares",permalink:"/docs/advanced/middlewares"},next:{title:"Lifecycles",permalink:"/docs/advanced/lifecycles"}},s=[],u={toc:s};function d(e){var t=e.components,n=(0,r.Z)(e,c);return(0,a.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Execution Context means the context of execution of GraphQL Operation. It's related to Dependency Injection, especially Singletons and represents the context object created by your GraphQL server."),(0,a.kt)("p",null,'Why "especially useful in ',(0,a.kt)("inlineCode",{parentName:"p"},"Singletone"),'s"?'),(0,a.kt)("p",null,"As you know from ",(0,a.kt)("a",{parentName:"p",href:"/docs/di/introduction"},'"Introduction to Dependency Injection"')," chapter, ",(0,a.kt)("inlineCode",{parentName:"p"},"Singleton"),"s can't directly access Operation scoped services, meaning they probably can't also directly access the context object created per each operation. Directly."),(0,a.kt)("p",null,"Thanks to ",(0,a.kt)("inlineCode",{parentName:"p"},"@ExecutionContext")," decorator, every ",(0,a.kt)("inlineCode",{parentName:"p"},"Singleton")," provider gets access to the GraphQL Context and the Operation scoped Injector."),(0,a.kt)("p",null,"Take a look at the example below."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Injectable, ExecutionContext } from 'graphql-modules';\nimport { Config } from './config';\n\n@Injectable()\nexport class Data {\n  constructor(private config: Config) {}\n\n  @ExecutionContext()\n  private context: ExecutionContext;\n\n  someMethod() {\n    console.log('Environment', this.config.env);\n\n    const value = this.context.injector.get(SOME_TOKEN);\n  }\n}\n")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Config")," token requested in the constructor is a Singleton."),(0,a.kt)("p",null,"Next lines shows the usage of ",(0,a.kt)("inlineCode",{parentName:"p"},"@ExecutionContext")," decorator. It's a property decorator that tells GraphQL Modules to put there the GraphQL Context with Injector."),(0,a.kt)("p",null,"This way the Singleton ",(0,a.kt)("inlineCode",{parentName:"p"},"Data")," service runs within the execution context of a GraphQL Operation and is able to access Operation scoped Injector and the GraphQL Context object."),(0,a.kt)("p",null,"It also means, you gain a lot in terms of performance, because the ",(0,a.kt)("inlineCode",{parentName:"p"},"Data")," class is instantiated only once and used in many operations."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"@ExecutionContext")," impacts the performance, depending on your Node version (execution context uses ",(0,a.kt)("inlineCode",{parentName:"p"},"async_hooks")," module).\nGraphQL Modules is smart enough to enable ",(0,a.kt)("inlineCode",{parentName:"p"},"async_hooks")," only when ",(0,a.kt)("inlineCode",{parentName:"p"},"@ExecutionContext")," is used.")))}d.isMDXComponent=!0}}]);